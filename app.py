from flask import Flask, jsonify, request, send_file\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport json\nimport os\n\napp = Flask(__name__)\n\nclass DCPAnalyzer:\n    def __init__(self):\n        # Initialize necessary variables for DCP analysis\n        self.data = []\n\n    def load_data(self, data):\n        # Load the data for analysis\n        self.data = data\n\n    def calculate(self):\n        # Perform DCP calculations\n        # (placeholder for actual calculations)\n        return {'average_dcp': sum(self.data) / len(self.data) if self.data else 0}  # example calculation\n\n    def generate_graph(self):\n        # Generate a graph from the data\n        plt.figure()\n        plt.plot(self.data)\n        plt.title('DCP Analysis Graph')\n        plt.xlabel('Index')\n        plt.ylabel('DCP Values')\n        graph_path = 'dcp_graph.png'\n        plt.savefig(graph_path)\n        return graph_path\n\n    def export_to_csv(self, filename='dcp_data.csv'):\n        # Export data to CSV\n        df = pd.DataFrame(self.data, columns=['DCP Values'])\n        df.to_csv(filename, index=False)\n        return filename\n\n    def export_to_json(self, filename='dcp_data.json'):\n        # Export data to JSON\n        with open(filename, 'w') as json_file:\n            json.dump(self.data, json_file)\n        return filename\n\n# Route to perform DCP calculation\n@app.route('/calculate', methods=['POST'])\ndef calculate():\n    content = request.json\n    analyzer = DCPAnalyzer()\n    analyzer.load_data(content.get('data', []))\n    result = analyzer.calculate()\n    return jsonify(result)\n\n# Route to generate a graph\n@app.route('/generate_graph', methods=['POST'])\ndef generate_graph():\n    content = request.json\n    analyzer = DCPAnalyzer()\n    analyzer.load_data(content.get('data', []))\n    graph_path = analyzer.generate_graph()\n    return send_file(graph_path, mimetype='image/png')\n\n# Route to export data to CSV\n@app.route('/export_csv', methods=['POST'])\ndef export_csv():\n    content = request.json\n    analyzer = DCPAnalyzer()\n    analyzer.load_data(content.get('data', []))\n    filename = analyzer.export_to_csv()\n    return send_file(filename, mimetype='text/csv')\n\n# Route to export data to JSON\n@app.route('/export_json', methods=['POST'])\ndef export_json():\n    content = request.json\n    analyzer = DCPAnalyzer()\n    analyzer.load_data(content.get('data', []))\n    filename = analyzer.export_to_json()\n    return send_file(filename, mimetype='application/json')\n\nif __name__ == '__main__':\n    app.run(debug=True)